# Operating System

## 1. 프로세스와 스레드의 차이

### 프로세스

- OS로부터 직접 자원(CPU, 메모리)과 주소 공간을 할당받아서 실행되는 프로그램.
- OS가 관리하는 작업 단위라고 할 수 있다.
- 메모리는 `code`, `heap`, `stack`, `data` 영역으로 구성되며, 각각을 segment라고 부른다.
  - 코드(Code) 영역: 실행할 프로그램 코드가 저장되는 영역.
  - 데이터(Data) 영역: 초기화된 전역 변수와 정적 변수가 저장되는 영역.
  - 힙(Heap) 영역: 동적 메모리 할당 시 사용되는 영역.
  - 스택(Stack) 영역: 함수 호출 시 지역 변수, 매개 변수, 리턴 주소 등이 저장되는 영역.
- 각각의 프로세스는 공유하지 않는, 별도의 메모리 영역을 갖는다.

#### 프로세스 제어 블록(Process Control Block, PCB)

- 운영체제가 프로세스에 대한 정보를 저장할 때 사용하는 자료구조.
- 프로세스가 CPU를 할당받아 작업을 하던 중, `context swtich`가 발생해 작업을 중단하게 되면, 작업 진행 상황을 PCB에 저장한다.
- 이후 다시 CPU를 할당받을 때, 이전 작업 정보를 PCB에서 불러온다.

#### PCB 에 저장되는 정보

- 프로세스 식별자(Process ID, PID) : 프로세스 식별번호
- 프로세스 상태 : new, ready, running, waiting, terminated 등의 상태를 저장
- 프로그램 카운터 : 프로세스가 다음에 실행할 명령어의 주소
- CPU 레지스터
- CPU 스케쥴링 정보 : 프로세스의 우선순위, 스케줄 큐에 대한 포인터 등
- 메모리 관리 정보 : 페이지 테이블 또는 세그먼트 테이블 등과 같은 정보를 포함
- 입출력 상태 정보 : 프로세스에 할당된 입출력 장치들과 열린 파일 목록
- 어카운팅 정보 : 사용된 CPU 시간, 시간제한, 계정번호 등

### 스레드

- `프로세스` 내에서 실행되는 작업의 흐름. 프로세스의 실행 단위.
- 하나의 `프로세스`는 최소 하나의 스레드를 갖는다.
- 각 스레드는 고유한 `stack` 영역을 가져 함수 호출, 지역 변수 등을 독립적으로 관리한다.
- 나머지 자원과 영역은 서로 공유한다.

## 2. 멀티스레드

한 프로세스에 `스레드`가 여러 개 존재하고, 여러 스레드가 `프로세스`의 작업을 수행하는 것.

### 장점

- 메모리 공간과 시스템 자원 소모가 줄어든다.
  - 멀티 프로세스의 경우 프로세스마다 별도의 메모리 할당이 필요하다.
- 스레드 간 `Context Switch` 비용이 프로세스 간 `Context Switch` 비용보다 훨씬 저렴하다.
  - 캐시 메모리를 비울 필요가 없기 때문이다.
- 멀티 프로세싱보다 효율적으로 작업을 수행할 수 있다.

### 문제점

- 동시성 문제가 발생할 수 있다.
  - 멀티 프로세스는 별도의 메모리 영역에서 각자 자원을 관리하기 때문에, 자원에 대한 동시성 문제가 발생하지 않는다.
  - 하지만 멀티 스레드 환경에서는 자원을 공유하기 때문에 다른 스레드가 사용 중인 자원에 접근하여 동시성 문제를 야기할 수 있다.
  - 이를 해결하기 위한 동기화 작업이 필요하다.
- 오류 발생으로 하나의 스레드가 종료되면, 전체 스레드가 종료될 수 있다.

### 동기화 작업

- 공유 자원을 읽고 쓰는 작업에 대해 락을 통해 적절한 원자성을 확보해야 한다.
- 공유 자원에 대한 가시성 문제를 고려해야 한다.
- 과도한 락 사용은 작업의 효율성을 떨어뜨리고, 심각한 경우 교착 상태(Deadlock)를 발생시킬 수 있다. 따라서 임계 영역은 가능한 최소화해야 한다.

## 5. 스케줄러

### 스케줄링이란?

여러 프로세스에 CPU를 가장 효율적으로 배정하는 문제

#### 목표

1. CPU 이용률, 처리량 최대화
2. 대기시간, 응답시간 최소화.
3. 오버헤드 최대화 (`context switch`, `process priority`, `system call` ...)
4. 우선순위 고려

####

### 선점형 / 비선점형 스케줄링

#### 선점형

- 프로세스가 CPU를 할당받아 사용 중이더라도, OS가 중간에 개입해 CPU를 몰수할 수 있는 방식.
- 일반적인 스케줄링 방식.
- 처리 시간 계산 어려움.

#### 비선점형

- 프로세스 종료, 혹은 I/O 등의 이벤트가 있을 때까지 할당을 보장하는 방식.
- 처리 시간 계산 용이

## 6. 장기 스케줄러

## 7. 단기 스케줄러

## 8. 중기 스케줄러

## 9. CPU 스케줄러

## 10. FCFS

## 11. SJF

## 12. SRTF

## 13. Priority scheduling

## 14. RR

## 15. 동기와 비동기의 차이

## 16. 프로세스 동기화

## 17. Critical Section

## 18. 해결책

## 19. Lock

## 20. Semaphores

## 21. 모니터

## 22. 메모리 관리 전략

## 23. 메모리 관리 배경

## 24. Paging

## 25. Segmentation

## 26. 가상 메모리

## 27. 배경

## 28. 가상 메모리가 하는 일

## 29. Demand Paging(요구 페이징)

## 30. 페이지 교체 알고리즘

## 31. 캐시의 지역성

## 32. Locality

## 33. Caching line
